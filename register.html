<!DOCTYPE html>
<html lang="vi">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Đăng ký - CodeLearn</title>

    <!-- Bootstrap 5 -->
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <!-- Bootstrap Icons -->
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css"
      rel="stylesheet"
    />

    <style>
      :root {
        --bg: #0f2a44;
        --tile: #193a5f;
        --accent: #3ee2c0;
      }
      body {
        background: linear-gradient(135deg, #0b2238 0%, #1a365d 100%);
        min-height: 100vh;
        font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
      }

      .nav-lite {
        background: rgba(11, 34, 56, 0.9);
        backdrop-filter: blur(10px);
        border-bottom: 1px solid rgba(255, 255, 255, 0.1);
      }
      .nav-lite .nav-link {
        color: #cfe2ff;
      }
      .nav-lite .nav-link:hover {
        color: #fff;
      }

      .register-container {
        min-height: calc(100vh - 80px);
        display: flex;
        align-items: center;
        justify-content: center;
        padding: 2rem 0;
      }

      .register-card {
        background: rgba(255, 255, 255, 0.98);
        border: none;
        border-radius: 20px;
        box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
        backdrop-filter: blur(10px);
        max-width: 500px;
        width: 100%;
      }

      .form-floating .form-control {
        border-radius: 12px;
        border: 1px solid #e1e8ed;
        padding: 1rem 0.75rem;
      }

      .form-floating .form-control:focus {
        border-color: var(--accent);
        box-shadow: 0 0 0 0.2rem rgba(62, 226, 192, 0.25);
      }

      .btn-register {
        background: linear-gradient(45deg, var(--accent), #2dd4bf);
        border: none;
        border-radius: 12px;
        padding: 12px 0;
        font-weight: 600;
        transition: all 0.3s ease;
      }

      .btn-register:hover {
        transform: translateY(-2px);
        box-shadow: 0 8px 25px rgba(62, 226, 192, 0.4);
      }

      .social-btn {
        border: 1px solid #e9ecef;
        background: #fff;
        border-radius: 12px;
        padding: 10px;
        transition: all 0.3s ease;
      }

      .social-btn:hover {
        background: #f8f9fa;
        transform: translateY(-1px);
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
      }

      .role-selector .form-check-input:checked {
        background-color: var(--accent);
        border-color: var(--accent);
      }

      .strength-meter {
        height: 4px;
        border-radius: 2px;
        overflow: hidden;
        background: #e9ecef;
        margin-top: 8px;
      }

      .strength-bar {
        height: 100%;
        transition: all 0.3s ease;
        border-radius: 2px;
      }

      .alert-custom {
        border-radius: 12px;
        border: none;
        padding: 12px 16px;
      }

      @media (max-width: 576px) {
        .register-card {
          margin: 1rem;
          border-radius: 16px;
        }
      }
    </style>
  </head>
  <body>
    <!-- Navigation -->
    <nav class="nav-lite navbar navbar-expand-lg sticky-top">
      <div class="container-xxl py-2">
        <a class="navbar-brand text-white fw-bold" href="index.html">
          <i class="bi bi-code-square me-2"></i>CODELEARN
        </a>
        <div class="ms-auto d-flex gap-2">
          <a class="btn btn-outline-light" href="index.html">Đăng nhập</a>
        </div>
      </div>
    </nav>

    <!-- Register Form -->
    <div class="register-container">
      <div class="container">
        <div class="row justify-content-center">
          <div class="col-12">
            <div class="card register-card p-4">
              <div class="card-body">
                <div class="text-center mb-4">
                  <h3 class="fw-bold text-dark mb-2">Tạo tài khoản mới</h3>
                  <p class="text-muted">
                    Gia nhập cộng đồng lập trình CodeLearn
                  </p>
                </div>

                <form id="registerForm">
                  <!-- Họ và tên -->
                  <div class="form-floating mb-3">
                    <input
                      type="text"
                      class="form-control"
                      id="fullName"
                      placeholder="Họ và tên"
                      required
                    />
                    <label for="fullName">Họ và tên *</label>
                  </div>

                  <!-- Email hoặc SĐT -->
                  <div class="form-floating mb-3">
                    <input
                      type="text"
                      class="form-control"
                      id="emailOrPhone"
                      placeholder="Email hoặc số điện thoại"
                      required
                    />
                    <label for="emailOrPhone">Email hoặc số điện thoại *</label>
                    <div class="form-text">
                      Bạn có thể sử dụng email hoặc số điện thoại để đăng ký
                    </div>
                  </div>

                  <!-- Mật khẩu -->
                  <div class="form-floating mb-2">
                    <input
                      type="password"
                      class="form-control"
                      id="password"
                      placeholder="Mật khẩu"
                      required
                    />
                    <label for="password">Mật khẩu *</label>
                  </div>
                  <!-- Độ mạnh mật khẩu -->
                  <div class="strength-meter">
                    <div class="strength-bar" id="strengthBar"></div>
                  </div>
                  <div class="form-text mb-3" id="strengthText">
                    Mật khẩu cần ít nhất 8 ký tự
                  </div>

                  <!-- Xác nhận mật khẩu -->
                  <div class="form-floating mb-3">
                    <input
                      type="password"
                      class="form-control"
                      id="confirmPassword"
                      placeholder="Xác nhận mật khẩu"
                      required
                    />
                    <label for="confirmPassword">Xác nhận mật khẩu *</label>
                    <div
                      class="invalid-feedback"
                      id="confirmPasswordFeedback"
                    ></div>
                  </div>

                  <!-- Chọn vai trò -->
                  <div class="mb-4">
                    <label class="form-label fw-semibold">Bạn là: *</label>
                    <div class="role-selector">
                      <div class="form-check mb-2">
                        <input
                          class="form-check-input"
                          type="radio"
                          name="role"
                          id="learner"
                          value="learner"
                          checked
                        />
                        <label class="form-check-label" for="learner">
                          <i class="bi bi-person-check me-2"></i>Học viên - Tôi
                          muốn học lập trình
                        </label>
                      </div>
                      <div class="form-check mb-2">
                        <input
                          class="form-check-input"
                          type="radio"
                          name="role"
                          id="teacher"
                          value="teacher"
                        />
                        <label class="form-check-label" for="teacher">
                          <i class="bi bi-person-workspace me-2"></i>Giảng viên
                          - Tôi muốn dạy lập trình
                        </label>
                      </div>
                      <div class="form-check">
                        <input
                          class="form-check-input"
                          type="radio"
                          name="role"
                          id="admin"
                          value="admin"
                        />
                        <label class="form-check-label" for="admin">
                          <i class="bi bi-shield-check me-2"></i>Quản trị viên
                        </label>
                      </div>
                    </div>
                  </div>

                  <!-- Điều khoản -->
                  <div class="form-check mb-4">
                    <input
                      class="form-check-input"
                      type="checkbox"
                      id="agreeTerms"
                      required
                    />
                    <label class="form-check-label small" for="agreeTerms">
                      Tôi đồng ý với
                      <a href="#" class="text-decoration-none"
                        >Điều khoản sử dụng</a
                      >
                      và
                      <a href="#" class="text-decoration-none"
                        >Chính sách bảo mật</a
                      >
                      của CodeLearn
                    </label>
                  </div>

                  <!-- Nút đăng ký -->
                  <div class="d-grid mb-4">
                    <button class="btn btn-register text-white" type="submit">
                      <i class="bi bi-person-plus me-2"></i>Tạo tài khoản
                    </button>
                  </div>
                </form>

                <!-- Đăng ký với mạng xã hội -->
                <div class="text-center text-secondary small mb-3">
                  Hoặc đăng ký với
                </div>
                <div class="row g-2 mb-4">
                  <div class="col-4">
                    <button class="btn social-btn w-100" type="button">
                      <i class="bi bi-google text-danger"></i>
                    </button>
                  </div>
                  <div class="col-4">
                    <button class="btn social-btn w-100" type="button">
                      <i class="bi bi-facebook text-primary"></i>
                    </button>
                  </div>
                  <div class="col-4">
                    <button class="btn social-btn w-100" type="button">
                      <i class="bi bi-github text-dark"></i>
                    </button>
                  </div>
                </div>

                <!-- Link đăng nhập -->
                <div class="text-center">
                  <span class="text-muted small">Đã có tài khoản?</span>
                  <a href="index.html" class="text-decoration-none fw-semibold"
                    >Đăng nhập ngay</a
                  >
                </div>

                <!-- reCAPTCHA notice -->
                <div class="border-top mt-4 pt-3 text-center small text-muted">
                  Trang này được bảo vệ bởi reCAPTCHA và áp dụng
                  <a href="#" class="text-decoration-none"
                    >Chính sách bảo mật</a
                  >
                  của Google.
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    <script>
      document.addEventListener("DOMContentLoaded", function () {
        const passwordInput = document.getElementById("password");
        const confirmPasswordInput = document.getElementById("confirmPassword");
        const strengthBar = document.getElementById("strengthBar");
        const strengthText = document.getElementById("strengthText");
        const form = document.getElementById("registerForm");

        // Kiểm tra độ mạnh mật khẩu
        passwordInput.addEventListener("input", function () {
          const password = this.value;
          const strength = checkPasswordStrength(password);
          updateStrengthMeter(strength);
        });

        // Kiểm tra khớp mật khẩu
        confirmPasswordInput.addEventListener("input", function () {
          const password = passwordInput.value;
          const confirmPassword = this.value;

          if (confirmPassword && password !== confirmPassword) {
            this.classList.add("is-invalid");
            document.getElementById("confirmPasswordFeedback").textContent =
              "Mật khẩu không khớp";
          } else {
            this.classList.remove("is-invalid");
          }
        });

        // Xử lý submit form
        form.addEventListener("submit", function (e) {
          e.preventDefault();

          const formData = new FormData(this);
          const role = formData.get("role");

          // Giả lập đăng ký thành công
          alert("Đăng ký thành công! Đang chuyển hướng...");

          // Chuyển hướng theo vai trò
          setTimeout(() => {
            switch (role) {
              case "admin":
                window.location.href = "admin_home.html";
                break;
              case "teacher":
                window.location.href = "teacher_home.html";
                break;
              default:
                window.location.href = "learner_home.html";
            }
          }, 1000);
        });

        function checkPasswordStrength(password) {
          let strength = 0;

          if (password.length >= 8) strength += 1;
          if (password.match(/[a-z]/)) strength += 1;
          if (password.match(/[A-Z]/)) strength += 1;
          if (password.match(/[0-9]/)) strength += 1;
          if (password.match(/[^a-zA-Z0-9]/)) strength += 1;

          return strength;
        }

        function updateStrengthMeter(strength) {
          const colors = [
            "#dc3545",
            "#fd7e14",
            "#ffc107",
            "#20c997",
            "#28a745",
          ];
          const texts = ["Rất yếu", "Yếu", "Trung bình", "Mạnh", "Rất mạnh"];
          const widths = ["20%", "40%", "60%", "80%", "100%"];

          if (strength > 0) {
            strengthBar.style.backgroundColor = colors[strength - 1];
            strengthBar.style.width = widths[strength - 1];
            strengthText.textContent = `Độ mạnh: ${texts[strength - 1]}`;
            strengthText.style.color = colors[strength - 1];
          } else {
            strengthBar.style.width = "0%";
            strengthText.textContent = "Mật khẩu cần ít nhất 8 ký tự";
            strengthText.style.color = "#6c757d";
          }
        }
      });
    </script>
  </body>
</html>
